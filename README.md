# 2019, PNU CSE, Embedded System Design and Experiment 

임베디드시스템 설계 및 실험 텀프로젝트 : 전자 피아노

    김현수(201424442)
    배준혁(201424465)
    김동규(201527506)
    Damir Assanov(201624630)


# 소개

 * 이 프로젝트는 임베디드 시스템을 이용하여 전자 피아노를 구현한다. STM32F107VCT6 보드와 압력센서, 디지털 앰프 모듈, 스피커를 이용하여 시스템을 구성하고 모든 구성 품을 피아노 박스를 이용하여 정리, 건반을 입력 할 수 있는 피아노를 구현하였다. 건반 입력의 조합으로 function key를 사용, 피아노의 모드를 변경할 수 있고 녹음, 재생 기능 을 지원한다.

# 텀 프로젝트 개요 
 
 1) 배경지식 
 * PWM
  Pulse-Width Modulation, PWM은 Duty의 비율을 제어하여 평균 전압을 조절하는 방법이다. 주로 LED와 같은 조명제품이나 DC모터의 제어에 사용되며 이번 프로젝트에 사용되는 스피커 역시 타이머를 통해 얻은 PWM값을 통해 소리를 출력한다. 
  
 * 디지털 앰프  
디지털 앰프란 신호를 디지털 상태에서 증폭하는 앰프를 의미한다. 디지털 앰프는 음향신호를 PWM신호로 변경, 이를 증폭하고 이후 PWM 신호를 Low Pass Filter 를 이용하여 원래의 아날로그 신호로 만들어낸다. 디지털 앰프는 아날로그 증폭회로에 비하여 신호왜곡에 강하고 효율적이다.

 2) 사용한 모듈 및 센서 

 * 압력센서
 * 디지털 앰프 모듈
 * 초음파 거리센서 모듈 HC-SR04P 

# 프로젝트 시나리오
 * 첫 실행시 idle 모드로 시작한다.
 * 피아노의 건반을 누르면 연결된 압력센서를 통해 ADC값을 얻고 해당 값이 경계값보다 클 경우 소리를 출력한다.
 * 건반 입력의 조합을 통해 function key를 구현하였다. 이를 통해   Record 모드와 Play모드를 선택할 수 있으며 옥타브 변경이 가능.
 * Record 모드에서는 입력받은 건반을 기억하여 사용자 정의 배열에 저장한다.
 * Play 모드에서는 배열을 통해 사용자가 연주한 음악을 재생한다.

# capture

시연 영상
https://drive.google.com/open?id=1mypYs02iNP0k-msvHjPGx7GWriQsWYhG

